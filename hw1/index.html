<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="author" content="James Qi">
	<meta name="keywords" content="HTML,Javascript">
	<title>hw1: Simple Page</title>
</head>

<body onload="getTimeStamp()">

	<h1>Registration Page</h1>

	<form action="formProcessor.html" method="get">
		Account Name: Should be numbers and letters but start with a letter, no longer than 20 characters<br>
		Comp531<br>
		<input type="text" name="AccountName" placeholder="Your account name" pattern="[a-zA-Z][a-zA-Z0-9]{1,20}" required><br>
		<br>

		Display Name (optional): Fun<br>
		<input type="text" name="DisplayName" placeholder="Your Display name"><br>
		<br>

		Email Address: XXX@hello.org<br>
		<input type="email" name="EmailAddress" placeholder="address@comp531.org" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required><br>
		<br>

		Phone Number: 123-123-1234<br>
		<input type="tel" name="PhoneNumber" placeholder="123-456-7980" pattern="\d{3}[\-]\d{3}[\-]\d{4}" required><br>
		<br>

		Date of Birth: 1990-10-12<br>
		<input type="date" name="BirthDate" id="birthday" placeholder="1990-07-10" required><br>
		<br>

		Zipcode: 77005<br>
		<input type="text" name="ZipCode" placeholder="77005" pattern="\d{5}" required><br>
		<br>

		Password: Should be numbers and letters but start with a letter, no longer than 20 characters<br>
		<input id="password1" name="Password" type="password" pattern="[a-zA-Z][a-zA-Z0-9]{1,20}" required><br>
		<br>

		Password Confirmation:<br>
		<input id="password2" name="Confirmation" type="password" pattern="[a-zA-Z][a-zA-Z0-9]{1,20}" required><br>

		<p><input name="TimeStamp" type="hidden" id="timestamp"></p>

		<p>
			<input type="submit" name="Submit" value="Submit" onclick="return validation()">
			<input type="reset" name="reset" value="Clear">
		</p>
	</form>

	<script type="text/javascript">
		function getTimeStamp(){
			var currTime = new Date().getTime();
			document.getElementById("timestamp").value = currTime;
		}

		function validation(){
			var inputpass1 = document.getElementById("password1").value;
			var inputpass2 = document.getElementById("password2").value;
			var inputdate = new Date(document.getElementById("birthday").value);
			var currday = new Date();
			var birthyear = inputdate.getFullYear();
			console.log(birthyear);
			var birthmonth = inputdate.getMonth();
			var birthdate = inputdate.getDate();
			var curryear = currday.getFullYear();
			var currmonth = currday.getMonth();
			var currdate = currday.getDate();

			if ((curryear - birthyear < 18) || ((curryear - birthyear === 18) && (currmonth < birthmonth)) || ((curryear - birthyear === 18) && (currmonth === birthmonth) && (currdate < birthdate))){
				window.alert("You have to be at least 18 years old to register!");
				return false;
			}

			if (inputpass1 != inputpass2){
				window.alert("Your input passwords have to match with each other!");
				return false;
			}

			return true;
		}
	</script>

</body>
</html>